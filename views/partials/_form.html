{% import "/views/macros/_google-forms.html" as google_forms with context %}

<section class="tst-form{% if partial.class %} {{ partial.class }}{% endif %}">
  <div class="tst-form__container" ng-controller="GHFormController as form">
    {% if partial.form %}
    {% set form = partial.form %}
    <iframe class="hidden" name="tst-form-iframe"></iframe>
    <form class="tst-form__form" action="{{form.action}}" target="form-iframe" ng-submit="form.submit()" ng-hide="form.submitted">
      {{google_forms.render_fields(form.get('items'))}}
      <div class="tst-form__cta">
        <button type="submit" class="button" ng-disabled="form.loading">Submit</button>
      </div>
    </form>
    <div class="tst-form__success" ng-show="form.submitted">Thank you! We've received your message and will review it as soon as we can.</div>
    {% endif %}
  </div>
</section>
